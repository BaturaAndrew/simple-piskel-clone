{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/constants.js","webpack:///./src/helpers/getColor.js","webpack:///./src/models/Canvas.js","webpack:///./src/components/frames/frames.js","webpack:///./src/components/preview/preview.js","webpack:///./src/helpers/setAction.js","webpack:///./src/components/tool/tools.js","webpack:///./src/components/hotkey/hotkey.js","webpack:///./src/components/saveImg/saveImg.js","webpack:///./src/helpers/getFps.js","webpack:///./src/app.js","webpack:///./src/models/State.js","webpack:///./src/components/color/color.js","webpack:///./src/helpers/loadState.js","webpack:///./src/controllers/controller.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","penSize","document","querySelectorAll","Array","slice","paintBucketEl","querySelector","colorPickerEl","pencilEl","eraserEl","currColorEl","prevColorEl","framesEl","firstFrames","addFrameButtonEl","canvasEl","getElementById","previewEl","saveImgToGif","saveImgToApng","rngFps","dspFps","canvasSize","BUCKET_CURSOR","COLOR_PICKER_CURSOR","PENCIL_CURSOR","ERASER_CURSOR","getColorFromCanvas","canvas","coord","rgbColor","getContext","getImageData","x","y","data","hex","g","b","componentToHex","toString","length","canvasWidth","Canvas","constructor","currСolor","this","_context","_scale","setScale","dimension","addListeners","addEventListener","e","currentTool","fillClosedArea","drawWithPencil","event","eraser","prevCoord","draw","clearOnePixel","drawPixel","currCoord","getCoord","scale","drawLineByBresenham","fillStyle","fillRect","clearRect","firstColor","pixelsToCheck","pop","pixelColor","push","drawResizedImage","src","width","height","img","Image","onload","drawImage","coord1","pageX","offsetLeft","pageY","offsetTop","Math","floor","x0","y0","currX","currY","Сolor","dx","abs","dy","sx","sy","err","prevX","prevY","context","e2","renderFrame","controlCanvas","controlState","frameBlock","createElement","className","frameCanvas","deleteBtn","remove","copyBtn","oldFrame","addFrame","toDataURL","frame","printImageToNewFrame","setTimeout","printImageOnCanvas","copyFrame","classList","add","appendChild","before","map","elem","body","style","cursor","figure","fames","coords","getCoords","famesCoords","shiftY","top","framesShiftY","moveAt","box","getBoundingClientRect","pageYOffset","left","pageXOffset","position","zIndex","onmousemove","onmouseup","ondragstart","moveFigure","childNodes","toggle","state","then","fpsInterval","dimention","requestAnimationFrame","now","Date","elapsed","ctx","count","imgFromFrame","getImgFromFrame","frameNumber","lastFrameFlag","drawFrame","setAction","tool","toolEl","controlCanvas_","childs","children","clearToolState","COLOR_PICKER","ERASER","PENCIL","PAINTBUCKET","KEY_CODE_S","KEY_CODE_B","KEY_CODE_C","KEY_CODE_P","KEY_CODE_E","KEY_CODE_ESC","canvasApng","downloadAPNG","delay","iLink","window","encoder","APNGencoder","setRepeat","setDelay","setDispose","setBlend","start","frames","forEach","addFrames","finish","out","stream","href","URL","createObjectURL","Blob","Uint8Array","bin","type","download","getFps","innerHTML","initialState","loadState","saveStateApp","colors","prevСolor","localStorage","setItem","JSON","stringify","saveDimension","saveCanvas","saveTool","parse","getItem","applySavedState","el","fps","canvasDimension","animation","printImageOnFrame","keyCode","altKey","handlerHotKey","GIFEncoder","downloadGif","handlerCanvasSize","dataset","size","handlerPenSize","initTool","handlerPaleteTools","refreshColor","crColor","prColor","target","handlerColor","initEventListeners"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,gBC5ErD,IAAIC,EAAUC,SAASC,iBAAiB,qBACxCF,EAAUG,MAAMP,UAAUQ,MAAMjC,KAAK6B,GACrC,MAAMK,EAAgBJ,SAASK,cAAc,gBACvCC,EAAgBN,SAASK,cAAc,gBACvCE,EAAWP,SAASK,cAAc,WAClCG,EAAWR,SAASK,cAAc,WAElCI,EAAcT,SAASK,cAAc,qBACrCK,EAAcV,SAASK,cAAc,qBAE3C,IAAIM,EAAWX,SAASC,iBAAiB,iBACzCU,EAAWT,MAAMP,UAAUQ,MAAMjC,KAAKyC,GACtC,MAAMC,EAAcZ,SAASK,cAAc,mBACrCQ,EAAmBb,SAASK,cAAc,cAE1CS,EAAWd,SAASe,eAAe,UAEnCC,EAAYhB,SAASK,cAAc,oBACnCY,EAAejB,SAASK,cAAc,eACtCa,EAAgBlB,SAASK,cAAc,gBAEvCc,EAASnB,SAASK,cAAc,cAChCe,EAASpB,SAASK,cAAc,gBAEtC,IAAIgB,EAAarB,SAASC,iBAAiB,uBAC3CoB,EAAanB,MAAMP,UAAUQ,MAAMjC,KAAKmD,GAExCvD,EAAOD,QAAU,CACfyD,cAjCoB,qDAkCpBC,oBAjC0B,wDAkC1BC,cAjCoB,uDAkCpBC,cAjCoB,mDAkCpBX,WACAV,gBACAE,gBACAC,WACAE,cACAC,cACAG,mBACAF,WACAH,WACAI,cACAI,YACAC,eACAC,gBACAC,SACAC,SACAC,aACAtB,Y,yMCrDa,SAAS2B,EAAmBC,EAAQC,GACjD,MAEMC,EAFUF,EAAOG,WAAW,MACRC,aAAaH,EAAMI,EAAGJ,EAAMK,EAAG,EAAG,GACjCC,KAC3B,IAAIC,EAAM,EAGV,OAAKN,EAAS,IAAOA,EAAS,IAAOA,EAAS,IAAOA,EAAS,IAa5ChD,EATHgD,EAAS,GASHO,EATOP,EAAS,GASbQ,EATiBR,EAAS,GAAlDM,EAUU,IAAGG,EAAezD,KAAKyD,EAAeF,KAAKE,EAAeD,KAR7DF,GALE,UAYT,IAAkBtD,EAAGuD,EAAGC,EALxB,SAASC,EAAelE,GAEtB,OADA+D,EAAM/D,EAAEmE,SAAS,IACK,IAAfJ,EAAIK,OAAgB,IAAGL,IAAQA,G,wHCf1C,MAAMM,EAAc,IACL,MAAMC,EAenBC,YAAYhB,EAAQiB,GAAW,mGARnB,KAQmB,iBANrB,GAMqB,gBAJtB,GAIsB,0BAC7BC,KAAKlB,OAASA,EACdkB,KAAKC,SAAWD,KAAKlB,OAAOG,WAAW,MACvCe,KAAKD,UAAYA,EAGnB,YACE,OAAOC,KAAKE,OAGdC,WACEH,KAAKE,OAASL,EAAOD,YAAcI,KAAKI,UAG1C,cACE,OAAOJ,KAAKC,SAIdI,eACEL,KAAKlB,OAAOwB,iBAAiB,YAAcC,IAChB,gBAArBP,KAAKQ,aACPR,KAAKS,eAAeF,GAIG,WAArBP,KAAKQ,aACPR,KAAKU,eAAeH,GAAG,GAGA,WAArBP,KAAKQ,aACPR,KAAKU,eAAeH,GAAG,KAM7BG,eAAeC,EAAOC,GACpB,IACIC,EADAC,GAAO,EAITD,EADED,EACUZ,KAAKe,cAAcJ,EAAOX,KAAKlB,QAE/BkB,KAAKgB,UAAUL,EAAOX,KAAKlB,QAEzCkB,KAAKlB,OAAOwB,iBAAiB,YAAcC,IACzC,IAAa,IAATO,EAAe,CACjB,MAAMG,EAAYpB,EAAOqB,SAASX,EAAGP,KAAKlB,OAAQkB,KAAKmB,OAGvDnB,KAAKoB,oBAAoBP,EAAU1B,EAAG0B,EAAUzB,EAC9C6B,EAAU9B,EAAG8B,EAAU7B,EAAGY,KAAKD,UAAWa,GAC5CC,EAAYI,KAIhBjB,KAAKlB,OAAOwB,iBAAiB,UAAW,KACtCQ,GAAO,IAIXE,UAAUT,GACR,MAAMU,EAAYpB,EAAOqB,SAASX,EAAGP,KAAKlB,OAAQkB,KAAKmB,OAIvD,OAHAnB,KAAKC,SAASoB,UAAYrB,KAAKD,UAC/BC,KAAKC,SAASqB,SAASL,EAAU9B,EAAG8B,EAAU7B,EAAGY,KAAK9C,QAAS8C,KAAK9C,SAE7D+D,EAGTF,cAAcR,GACZ,MAAMU,EAAYpB,EAAOqB,SAASX,EAAGP,KAAKlB,OAAQkB,KAAKmB,OAEvD,OADAnB,KAAKC,SAASsB,UAAUN,EAAU9B,EAAG8B,EAAU7B,EAAGY,KAAK9C,QAAS8C,KAAK9C,SAC9D+D,EAITR,eAAeE,GACb,MAAMM,EAAYpB,EAAOqB,SAASP,EAAOX,KAAKlB,OAAQkB,KAAKmB,OACrDK,EAAa3C,EAAmBmB,KAAKlB,OAAQmC,EAAWjB,KAAKI,WAEnEJ,KAAKC,SAASoB,UAAYrB,KAAKD,UAE/B,MAAM0B,EAAgB,CAACR,EAAU9B,EAAG8B,EAAU7B,GAE9C,KAAOqC,EAAc9B,OAAS,GAAG,CAC/B,MAAMP,EAAIqC,EAAcC,MAClBvC,EAAIsC,EAAcC,MAElB3C,EAAQ,CACZI,IACAC,KAGIuC,EAAa9C,EAAmBmB,KAAKlB,OAAQC,EAAOiB,KAAKI,WAE3DjB,GAAK,GAAKA,EAAIa,KAAKI,WAAahB,GAAK,GAAKA,EAAIY,KAAKI,WAAcuB,IAAeH,IAClFxB,KAAKC,SAASqB,SAASnC,EAAGC,EAAGY,KAAK9C,QAAS8C,KAAK9C,SAChDuE,EAAcG,KAAKzC,EAAIa,KAAK9C,QAASkC,GACrCqC,EAAcG,KAAKzC,EAAIa,KAAK9C,QAASkC,GACrCqC,EAAcG,KAAKzC,EAAGC,EAAIY,KAAK9C,SAC/BuE,EAAcG,KAAKzC,EAAGC,EAAIY,KAAK9C,WAKrC2E,iBAAiBC,GACf9B,KAAKlB,OAAOiD,MAAQ/B,KAAKI,UACzBJ,KAAKlB,OAAOkD,OAAShC,KAAKI,UAC1BJ,KAAKG,WAEL,MAAM8B,EAAM,IAAIC,MAEhBD,EAAIH,IAAMA,EACVG,EAAIE,OAAS,KACXnC,KAAKC,SAASmC,UAAUH,EAAK,EAAG,EAAGjC,KAAKI,UAAWJ,KAAKI,YAK5D,gBAAgBO,EAAO7B,EAAQqC,GAC7B,MAAMkB,EAAS,CACblD,EAAG,EACHC,EAAG,GAOL,OALAiD,EAAOlD,EAAKwB,EAAM2B,MAAQxD,EAAOyD,WACjCF,EAAOjD,EAAKuB,EAAM6B,MAAQ1D,EAAO2D,UACjCJ,EAAOlD,EAAIuD,KAAKC,MAAMN,EAAOlD,EAAIgC,GACjCkB,EAAOjD,EAAIsD,KAAKC,MAAMN,EAAOjD,EAAI+B,GAE1BkB,EAGTjB,oBAAoBwB,EAAIC,EAAIC,EAAOC,EAAOC,EAAOpC,GAC/C,MAAMqC,EAAKP,KAAKQ,IAAIJ,EAAQF,GACtBO,EAAKT,KAAKQ,IAAIH,EAAQF,GACtBO,EAAMR,EAAKE,EAAS,GAAK,EACzBO,EAAMR,EAAKE,EAAS,GAAK,EAC/B,IAAIO,EAAML,EAAKE,EAEXI,EAAQX,EACRY,EAAQX,EAGZ,KAAQU,IAAUT,GAAWU,IAAUT,GAAQ,CACxCnC,EAIHZ,KAAKC,SAASsB,UAAUgC,EAAOC,EAAOxD,KAAK9C,QAAS8C,KAAK9C,UAHzD8C,KAAKyD,QAAQpC,UAAY2B,EACzBhD,KAAKyD,QAAQnC,SAASiC,EAAOC,EAAOxD,KAAK9C,QAAS8C,KAAK9C,UAIzD,MAAMwG,EAAK,EAAIJ,EAEXI,GAAMP,IACRG,GAAOH,EACPI,GAASH,GAGPM,EAAKT,IACPK,GAAOL,EACPO,GAASH,IAMf,yBACE,OAAOzD,G,KCnLX,SAAS+D,EAAYC,EAAeC,GAClC,MAAMC,EAAa3G,SAAS4G,cAAc,OAC1CD,EAAWE,UAAY,gBAEvB,MAAMC,EAAc9G,SAAS4G,cAAc,UAC3CE,EAAYD,UAAY,iBAExB,MAAME,EAAY/G,SAAS4G,cAAc,UACzCG,EAAUF,UAAY,kDACtBE,EAAU5D,iBAAiB,QAAS,SAiCjBnD,SAASK,cAAc,wBAC/B2G,UAhCX,MAAMC,EAAUjH,SAAS4G,cAAc,UAoBvC,OAnBAK,EAAQJ,UAAY,oDACpBI,EAAQ9D,iBAAiB,QAAS,KAsBpC,SAAmB+D,EAAUT,EAAeC,GAC1CS,EAASV,EAAeC,GAsE1B,SAA8BQ,GAC5B,MAAMpC,EAAM,IAAIC,MAChBD,EAAIH,IAAMuC,EAASE,YACnB,MAAMC,EAAQrH,SAASK,cAAc,0BAC/BiG,EAAUe,EAAMvF,WAAW,MACjCuF,EAAMzC,MAAQsC,EAAStC,MACvByC,EAAMxC,OAASqC,EAASrC,OACxBC,EAAIE,OAAS,KACXsB,EAAQrB,UAAUH,EAAK,EAAG,EACxBoC,EAAStC,MACTsC,EAASrC,SA/EbyC,CAAqBJ,GACrBK,WAAW,IAAMC,EAAmBf,EAAeC,GAAe,IAzB1Be,CAAUX,EAAaL,EAAeC,IAG9EC,EAAWxD,iBAAiB,YAAa,KACvCwD,EAAWe,UAAUC,IAAI,SACzBV,EAAQS,UAAUC,IAAI,WACtBZ,EAAUW,UAAUC,IAAI,aAE1BhB,EAAWxD,iBAAiB,WAAY,KACtCwD,EAAWe,UAAUV,OAAO,SAC5BC,EAAQS,UAAUV,OAAO,WACzBD,EAAUW,UAAUV,OAAO,aAG7BL,EAAWiB,YAAYd,GACvBH,EAAWiB,YAAYb,GACvBJ,EAAWiB,YAAYX,GAEhBN,EAeT,SAASQ,EAASV,EAAeC,GAC/B,MAAMW,EAAQb,EAAYC,EAAeC,GACzC7F,mBAAiBgH,OAAOR,GACxB,IAAI1G,EAAWX,SAASC,iBAAiB,mBACzCU,EAAWT,MAAMP,UAAUQ,MAAMjC,KAAKyC,GACtCA,EAASmH,IAAKC,IACZA,EAAKL,UAAUV,OAAO,YAIxBK,EAAMlE,iBAAiB,YAAcC,IACnCpD,SAASgI,KAAKC,MAAMC,OAAS,OA+DjC,SAAoBC,EAAQ3E,GAC1B,MAAM4E,EAAQpI,SAASK,cAAc,WAC/BgI,EAASC,EAAUH,GACnBI,EAAcD,EAAUF,GAExBI,EAAShF,EAAM6B,MAAQgD,EAAOI,IAC9BC,EAAelF,EAAM6B,MAAQkD,EAAYE,IA8B/C,SAASE,EAAOvF,GACd+E,EAAOF,MAAMQ,IAAO,GAAErF,EAAEiC,MAAQqD,EAAeF,MAGjD,SAASF,EAAUP,GACjB,MAAMa,EAAMb,EAAKc,wBACjB,MAAO,CACLJ,IAAKG,EAAIH,IAAMK,YACfC,KAAMH,EAAIG,KAAOC,aApCrBb,EAAOF,MAAMgB,SAAW,WACxBd,EAAOF,MAAMiB,OAAS,IAKtBd,EAAMR,YAAYO,GAElBQ,EAAOnF,GAGPxD,SAASmJ,YAAc,SAAU3F,GAC/BmF,EAAOnF,IAGT2E,EAAOiB,UAAY,WAIjBpJ,SAASmJ,YAAc,KACvBhB,EAAOiB,UAAY,MAIrBjB,EAAOkB,YAAc,WACnB,OAAO,GA9FPC,CAAWjC,EAAOjE,KAIpBiE,EAAMkC,WAAW,GAAG7B,UAAUC,IAAI,UAElCN,EAAMkC,WAAW,GAAGpG,iBAAiB,QAAS,KAC5CxC,EAAWX,SAASC,iBAAiB,mBACrCU,EAAWT,MAAMP,UAAUQ,MAAMjC,KAAKyC,GACtCA,EAASmH,IAAKC,IACZA,EAAKL,UAAUV,OAAO,YAExBK,EAAMkC,WAAW,GAAG7B,UAAU8B,OAAO,UACrChC,EAAmBf,EAAeC,KAEpBD,EAAc9E,OAAOG,WAAW,MACxCsC,UAAU,EAAG,EAAGqC,EAAc9E,OAAOiD,MAAO6B,EAAc9E,OAAOkD,QAG3E,SAAS2C,EAAmBf,EAAeC,GACzC,MAAMW,EAAQrH,SAASK,cAAc,0BAC/ByE,EAAM,IAAIC,MAChBD,EAAIH,IAAM0C,EAAMD,YAChB,MAAMd,EAAUG,EAAc9E,OAAOG,WAAW,MAChDwE,EAAQlC,UAAU,EAAG,EAAGqC,EAAc9E,OAAOiD,MAAO6B,EAAc9E,OAAOkD,QAEzEC,EAAIE,OAAS,KACXsB,EAAQrB,UAAUH,EAAK,EAAG,EACxB4B,EAAa+C,MAAMxG,UACnByD,EAAa+C,MAAMxG,Y,KC1FzB,IAAIyG,EACAC,EACAC,EAeJ,SAASjG,IAEPkG,sBAAsBlG,GAGtB,MAAMmG,EAAMC,KAAKD,MACXE,EAAUF,EAAMJ,EAGlBM,EAAUL,IAGZD,EAAOI,EAAOE,EAAUL,EAS5B,WACE,MAAMM,EAAMjJ,YAAUc,WAAW,MACjC,IAAIoI,EAAQ,EAEZA,EAeF,SAAyBnM,GACvB,IAAIsJ,EAAQrH,SAASC,iBAAiB,mBAGtC,OAFAoH,EAAQnH,MAAMP,UAAUQ,MAAMjC,KAAKmJ,GACnC8C,EAAaxF,IAAM0C,EAAMtJ,GAAGqJ,YACrBC,EAAM7E,OAAS,EAnBd4H,CAAgBC,GACxBJ,EAAI7F,UAAU,EAAG,EAAGwF,EAAWA,GAE/B5I,YAAU4D,MAAQgF,EAClB5I,YAAU6D,OAAS+E,EAEnBK,EAAIhF,UAAUkF,EAAc,EAAG,EAAGP,EAAWA,GAEzCS,GAAeH,IAAOI,GAAgB,GACtCD,GAAe,IAAGC,GAAgB,GAElCA,EAAeD,GAAe,EAC7BA,EAAc,EAxBjBE,IAIJ,IAAIF,EAAc,EACdC,GAAgB,EACpB,MAAMH,EAAe,IAAIpF,M,eCzCV,SAASyF,EAAUC,EAAMvC,EAAQwC,EAAQC,IAOxD,WAEE,IAAIC,EADc5K,SAASK,cAAc,YAClBwK,SACvBD,EAAS1K,MAAMP,UAAUQ,MAAMjC,KAAK0M,GACpCA,EAAO9C,IAAKC,IACVA,EAAKL,UAAUV,OAAO,YAXxB8D,GACAH,EAAetH,YAAcoH,EAC7BzK,SAASgI,KAAKC,MAAMC,OAASA,EAC7BwC,EAAOhD,UAAUC,IAAI,UCevB,MAAMoD,EAAe,cACfC,EAAS,SACTC,EAAS,SACTC,EAAc,cCVpB,MAAMC,EAAa,GACbC,EAAa,GACbC,EAAa,GACbC,EAAa,GACbC,EAAa,GACbC,EAAe,G,KCdrB,MAAMC,EAAazL,SAASK,cAAc,gBAgB1C,SAASqL,EAAaC,EAAOC,EAAO3I,GAClC4I,OAAOC,QAAU,IAAIC,YAAYN,GACjCK,QAAQE,UAAU,GAClBF,QAAQG,SAASN,GACjBG,QAAQI,WAAW,GACnBJ,QAAQK,SAAS,GAEjBL,QAAQM,QAaV,SAAmBnJ,GACjB,MAAMgH,EAAMwB,EAAW3J,WAAW,MAClC,IAAIuK,EAASrM,SAASC,iBAAiB,mBACvCoM,EAASnM,MAAMP,UAAUQ,MAAMjC,KAAKmO,GACpCA,EAAOC,QAASjF,IACdoE,EAAW7G,MAAQ3B,EACnBwI,EAAW5G,OAAS5B,EACpB,MAAM6B,EAAM,IAAIC,MAChBD,EAAIH,IAAM0C,EAAMD,YAChB6C,EAAIhF,UAAUH,EAAK,EAAG,EAAG7B,EAAWA,GAEpC6I,QAAQ3E,SAAS8C,KAGnB6B,QAAQ3E,SAAS8C,GA1BjBsC,CAAUtJ,GACV6I,QAAQU,SAER,MAAMC,EAAMX,QAAQY,SACdC,EAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAAC,IAAIC,WAAWN,EAAIO,MAAO,CACnEC,KAAM,eAIR,OAFArB,EAAMe,KAAOA,EACbf,EAAMsB,SAAW,gBACV,EC/BM,SAASC,IAEtB,OADA/L,SAAOgM,UAAa,GAAEjM,SAAOnC,aACrBmC,SAAOnC,MCUjB,MAAM0H,EAAe,ICjBN,MACb/D,YAAYhB,GACVkB,KAAKlB,OAASA,EACdkB,KAAK4G,MAAQ5G,KAAKwK,eAClBxK,KAAKyK,YAGPC,aAAaC,IAEV3K,KAAK4G,MAAM7G,UAAWC,KAAK4G,MAAMgE,WAAaD,EAE/C3K,KAAK4G,MAAM3E,IAAMjC,KAAKlB,OAAOyF,YAE7BsG,aAAaC,QAAQ,QAASC,KAAKC,UAAUhL,KAAK4G,QAIpDqE,cAAc7K,GAGZ,OAFAJ,KAAK4G,MAAMxG,UAAYA,EACvByK,aAAaC,QAAQ,QAASC,KAAKC,UAAUhL,KAAK4G,SAC3C,EAGTsE,WAAW9K,GAIT,OAHAJ,KAAK4G,MAAMxG,UAAYA,EACvBJ,KAAK4G,MAAM3E,IAAMjC,KAAKlB,OAAOyF,YAC7BsG,aAAaC,QAAQ,QAASC,KAAKC,UAAUhL,KAAK4G,SAC3C,EAGTuE,SAASvD,GAGP,OAFA5H,KAAK4G,MAAMgB,KAAOA,EAClBiD,aAAaC,QAAQ,QAASC,KAAKC,UAAUhL,KAAK4G,SAC3C,EAIT6D,YACEzK,KAAK4G,MAAQmE,KAAKK,MAAMP,aAAaQ,QAAQ,UACzCrL,KAAK4G,MACP5G,KAAKsL,kBAELtL,KAAKwK,eAITA,eAQE,OAPAxK,KAAK4G,MAAQ,CACX7G,YAAW,QACX6K,YAAW,IAEb5K,KAAK4G,MAAM3E,IAAM,GACjBjC,KAAK4G,MAAMxG,UAAY,IACvBJ,KAAK4G,MAAMgB,KAAO,SACX5H,KAAK4G,MAGd0E,kBACE,MAAMrJ,EAAM,IAAIC,MAChBD,EAAIH,IAAM9B,KAAK4G,MAAM3E,IACrB,MAAMwB,EAAUzD,KAAKlB,OAAOG,WAAW,MACvCe,KAAKlB,OAAOiD,MAAQ/B,KAAK4G,MAAMxG,UAC/BJ,KAAKlB,OAAOkD,OAAShC,KAAK4G,MAAMxG,UAChC6B,EAAIE,OAAS,KACXsB,EAAQrB,UAAUH,EAAK,EAAG,EACxBjC,KAAK4G,MAAMxG,UACXJ,KAAK4G,MAAMxG,cDjDYnC,YE4B/B,IAAoB4F,ECzCwBzD,EDyCxByD,EF3BTA,EE4BTjG,cAAYzB,MAAQ0H,EAAa+C,MAAM7G,UACvClC,cAAY1B,MAAQ0H,EAAa+C,MAAMgE,UC1CrB,MADwBxK,EHe7ByD,EAAa+C,MAAMxG,aGb9B5B,aAAWyG,IAAIsG,GAAMA,EAAG1G,UAAUV,OAAO,WACzC3F,aAAW,GAAGqG,UAAUC,IAAI,WAGZ,KAAd1E,IACF5B,aAAWyG,IAAIsG,GAAMA,EAAG1G,UAAUV,OAAO,WACzC3F,aAAW,GAAGqG,UAAUC,IAAI,WAGZ,MAAd1E,IACF5B,aAAWyG,IAAIsG,GAAMA,EAAG1G,UAAUV,OAAO,WACzC3F,aAAW,GAAGqG,UAAUC,IAAI,WHIhC,MAAMlB,EAAgB,IAAI/D,EAAO5B,WAAU4F,EAAa+C,MAAM7G,WAC9D6D,EAAcxD,UAAYyD,EAAa+C,MAAMxG,UAC7CwD,EAAczD,WACdyD,EAAcvD,eIcC,SAA4BuD,EAAeC,GAExDS,EAASV,EAAeC,GACxB7F,mBAAiBsC,iBAAiB,QAAS,IAAMgE,EAASV,EAAeC,IAGzEvF,SAAOgC,iBAAiB,QAAS,KV/BpB,SAAmBkL,EAAKC,GACrC3E,EAAc,IAAO0E,EACrB3E,EAAOK,KAAKD,MAEZF,EAAyB0E,EAEzB3K,KUyBuC4K,CAAUpB,IAAUzG,EAAa+C,MAAMxG,YAG9EnC,WAASqC,iBAAiB,UAAW,MXoDvC,SAA2BsD,GACzB,MAAM3B,EAAM,IAAIC,MAChBD,EAAIH,IAAM8B,EAAc9E,OAAOyF,YAC/B,MAAMC,EAAQrH,SAASK,cAAc,0BAC/BiG,EAAUe,EAAMvF,WAAW,MACjCuF,EAAMzC,MAAQ6B,EAAcxD,UAC5BoE,EAAMxC,OAAS4B,EAAcxD,UAC7B6B,EAAIE,OAAS,KACXsB,EAAQrB,UAAUH,EAAK,EAAG,EACxB2B,EAAcxD,UACdwD,EAAcxD,YW7DhBuL,CAAkB/H,GAClBC,EAAa6G,aAAa,CAAC7G,EAAa+C,MAAM7G,UAAW8D,EAAa+C,MAAMgE,cAI9EzN,SAASmD,iBAAiB,UAAWC,IPjCxB,SAAuBA,EAAGqD,EAAeC,GAClDtD,EAAEqL,UAAYtD,GAAc/H,EAAEsL,QAChChI,EAAa6G,eAEXnK,EAAEqL,UAAYrD,GAChBZ,EAAU,cAAelJ,gBAAelB,gBAAeqG,GAErDrD,EAAEqL,UAAYpD,GAChBb,EAAU,cAAejJ,sBAAqBjB,gBAAemG,GAE3DrD,EAAEqL,UAAYnD,GAChBd,EAAU,SAAUhJ,gBAAejB,WAAUkG,GAE3CrD,EAAEqL,UAAYlD,GAChBf,EAAU,SAAU/I,gBAAejB,WAAUiG,GAE3CrD,EAAEqL,UAAYjD,IAChBxL,SAASgI,KAAKC,MAAMC,OAAS,KOgBWyG,CAAcvL,EAAGqD,EAAeC,IAG1EzF,eAAakC,iBAAiB,QAAS,KNnDzC,SAAqBwI,GACnB,MAAMG,EAAU,IAAI8C,WACpB9C,EAAQE,UAAU,GAElBF,EAAQG,SAASN,GACjBG,EAAQM,QAER,IAAIC,EAASrM,SAASC,iBAAiB,mBACvCoM,EAASnM,MAAMP,UAAUQ,MAAMjC,KAAKmO,GACpCA,EAAOC,QAAQjF,GAASyE,EAAQ3E,SAASE,EAAMvF,WAAW,QAC1DgK,EAAQU,SACRV,EAAQoB,SAAS,iBMwC4B2B,CAAY,IAAO1B,MAChEjM,gBAAciC,iBAAiB,QAAS,IAAMuI,EAAa,IAAOyB,IAAUjM,gBAAewF,EAAa+C,MAAMxG,YRtBhH,SAA2BwD,EAAeC,GACxCrF,aAAWyG,IAAKC,IACdA,EAAK5E,iBAAiB,QAAS,KAC7B9B,aAAWyG,IAAIsG,GAAMA,EAAG1G,UAAUV,OAAO,WACzCe,EAAKL,UAAUC,IAAI,UAEnBlB,EAAcxD,WAAa8E,EAAKqF,UAChC3G,EAAc/B,iBAAiBgC,EAAa+C,MAAM3E,KAClD4B,EAAaoH,cAAcrH,EAAcxD,eQiB7C6L,CAAkBrI,EAAeC,GRpCnC,SAAwBD,GACtB1G,UAAQ+H,IAAKC,IACXA,EAAK5E,iBAAiB,QAAS,KAC7BpD,UAAQ+H,IAAIsG,GAAMA,EAAG1G,UAAUV,OAAO,aACtCe,EAAKL,UAAUC,IAAI,YAEnBlB,EAAc1G,SAAWgI,EAAKgH,QAAQC,SQ+B1CC,CAAexI,GRbjB,SAAkBA,EAAepD,GAC/BrD,SAASmD,iBAAiB,mBAAoB,KAC5C,OAAQE,GACN,KAAK4H,EACHT,EAAUS,EAAQzJ,gBAAejB,WAAUkG,GAC3C,MACF,KAAKuE,EACHR,EAAUQ,EAAQvJ,gBAAejB,WAAUiG,GAC3C,MACF,KAAKyE,EACHV,EAAUU,EAAa5J,gBAAelB,gBAAeqG,GACrD,MACF,KAAKsE,EACHP,EAAUO,EAAcxJ,sBAAqBjB,gBAAemG,GAC5DpD,EAAc0H,KQApBmE,CAASzI,EAAeC,EAAa+C,MAAMgB,MRQ7C,SAA4BhE,EAAeC,GACzCtG,gBAAc+C,iBAAiB,QAAS,KACtCqH,EAAUU,EAAa5J,gBAAelB,gBAAeqG,GACrDC,EAAasH,SAAS9C,KAGxB5K,gBAAc6C,iBAAiB,QAAS,KACtCqH,EAAUO,EAAcxJ,sBAAqBjB,gBAAemG,GAC5DC,EAAa+C,MAAMgB,KAAOM,EAC1BrE,EAAasH,SAASjD,KAGxBxK,WAAS4C,iBAAiB,QAAS,KACjCqH,EAAUS,EAAQzJ,gBAAejB,WAAUkG,GAC3CC,EAAasH,SAAS/C,KAGxBzK,WAAS2C,iBAAiB,QAAS,KACjCqH,EAAUQ,EAAQvJ,gBAAejB,WAAUiG,GAC3CC,EAAasH,SAAShD,KQ1BxBmE,CAAmB1I,EAAeC,GFpDrB,SAAsBD,EAAeC,GAqBlD,SAAS0I,EAAaC,GACpB,MAAMC,EAAU7O,cAAYzB,MAExBqQ,IAAY3I,EAAa+C,MAAM7G,YACjC8D,EAAa+C,MAAMgE,UAAY6B,EAC/B5I,EAAa+C,MAAM7G,UAAYyM,EAC/B5O,cAAYzB,MAAQ0H,EAAa+C,MAAM7G,UACvClC,cAAY1B,MAAQ0H,EAAa+C,MAAMgE,UACvChH,EAAc7D,UAAYyM,GA5B9B5O,cAAY0C,iBAAiB,QAAUC,IACrCsD,EAAa+C,MAAM7G,UAAYQ,EAAEmM,OAAOvQ,MACxCyH,EAAc7D,UAAY8D,EAAa+C,MAAM7G,UAC7CwM,EAAahM,EAAEmM,OAAOvQ,SACrB,GAEH0B,cAAYyC,iBAAiB,QAAUC,IACrCsD,EAAa+C,MAAM7G,UAAYQ,EAAEmM,OAAOvQ,MACxCyH,EAAc7D,UAAY8D,EAAa+C,MAAM7G,UAC7CwM,EAAahM,EAAEmM,OAAOvQ,SACrB,GAEH8B,WAASqC,iBAAiB,YAAcC,IACtC,GAAgC,gBAA5BsD,EAAa+C,MAAMgB,KAAwB,CAC7C,MAAM7I,EAAQc,EAAOqB,SAASX,EAAGqD,EAAc9E,OAAQ8E,EAAczC,OACrEoL,EAAa1N,EAAmB+E,EAAc9E,OAC5CC,EAAO6E,EAAcxD,eEsC3BuM,CAAa/I,EAAeC,GJxC9B+I,CAAmBhJ,EAAeC","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","// icons for cursors\r\nconst BUCKET_CURSOR = 'url(assets/images/fill-drip-solid.png) 20 20, auto';\r\nconst COLOR_PICKER_CURSOR = 'url(assets/images/eye-dropper-solid.png) -20 23, auto';\r\nconst PENCIL_CURSOR = 'url(assets/images/pencil-alt-solid.png) -20 23, auto';\r\nconst ERASER_CURSOR = 'url(assets/images/eraser-solid.png) -20 23, auto';\r\n// tools\r\nlet penSize = document.querySelectorAll('.pen-size__option');\r\npenSize = Array.prototype.slice.call(penSize);\r\nconst paintBucketEl = document.querySelector('.paintBucket');\r\nconst colorPickerEl = document.querySelector('.colorPicker');\r\nconst pencilEl = document.querySelector('.pencil');\r\nconst eraserEl = document.querySelector('.eraser');\r\n// colors\r\nconst currColorEl = document.querySelector('.curr-color__item');\r\nconst prevColorEl = document.querySelector('.prev-color__item');\r\n// frames\r\nlet framesEl = document.querySelectorAll('frames__block');\r\nframesEl = Array.prototype.slice.call(framesEl);\r\nconst firstFrames = document.querySelector('.frames__canvas');\r\nconst addFrameButtonEl = document.querySelector('.add-frame');\r\n// canvas\r\nconst canvasEl = document.getElementById('canvas');\r\n// preview section\r\nconst previewEl = document.querySelector('.preview__canvas');\r\nconst saveImgToGif = document.querySelector('.export-gif');\r\nconst saveImgToApng = document.querySelector('.export-apng');\r\n\r\nconst rngFps = document.querySelector('.fps-range');\r\nconst dspFps = document.querySelector('.fps-display');\r\n\r\nlet canvasSize = document.querySelectorAll('.canvas-size__value');\r\ncanvasSize = Array.prototype.slice.call(canvasSize);\r\n\r\nmodule.exports = {\r\n  BUCKET_CURSOR,\r\n  COLOR_PICKER_CURSOR,\r\n  PENCIL_CURSOR,\r\n  ERASER_CURSOR,\r\n  canvasEl,\r\n  paintBucketEl,\r\n  colorPickerEl,\r\n  pencilEl,\r\n  currColorEl,\r\n  prevColorEl,\r\n  addFrameButtonEl,\r\n  framesEl,\r\n  eraserEl,\r\n  firstFrames,\r\n  previewEl,\r\n  saveImgToGif,\r\n  saveImgToApng,\r\n  rngFps,\r\n  dspFps,\r\n  canvasSize,\r\n  penSize,\r\n};\r\n","/* return pixel color in hex */\r\nexport default function getColorFromCanvas(canvas, coord) {\r\n  const context = canvas.getContext('2d');\r\n  const imageData = context.getImageData(coord.x, coord.y, 1, 1);\r\n  const rgbColor = imageData.data; // rgb color\r\n  let hex = 0;\r\n\r\n  // unpainted area on canvas (white color)\r\n  if (!rgbColor[0] && !rgbColor[1] && !rgbColor[2] && !rgbColor[3]) {\r\n    return '#ffffff';\r\n  }\r\n\r\n  hex = rgbToHex(rgbColor[0], rgbColor[1], rgbColor[2]);\r\n\r\n  return hex;\r\n\r\n  function componentToHex(c) {\r\n    hex = c.toString(16);\r\n    return hex.length === 1 ? `0${hex}` : hex;\r\n  }\r\n\r\n  function rgbToHex(r, g, b) {\r\n    return `#${componentToHex(r)}${componentToHex(g)}${componentToHex(b)}`;\r\n  }\r\n}\r\n","/* eslint-disable max-len */\r\nimport getColorFromCanvas from '../helpers/getColor';\r\n\r\nconst canvasWidth = 512;\r\nexport default class Canvas {\r\n  canvas;\r\n\r\n  currentTool;\r\n\r\n  currСolor;\r\n\r\n  dimension = 512;\r\n\r\n  penSize = 1;\r\n\r\n  _scale = 1;\r\n\r\n  _context;\r\n\r\n  constructor(canvas, currСolor) {\r\n    this.canvas = canvas;\r\n    this._context = this.canvas.getContext('2d');\r\n    this.currСolor = currСolor;\r\n  }\r\n\r\n  get scale() {\r\n    return this._scale;\r\n  }\r\n\r\n  setScale() {\r\n    this._scale = Canvas.canvasWidth / this.dimension;\r\n  }\r\n\r\n  get context() {\r\n    return this._context;\r\n  }\r\n\r\n\r\n  addListeners() {\r\n    this.canvas.addEventListener('mousedown', (e) => {\r\n      if (this.currentTool === 'paintBucket') {\r\n        this.fillClosedArea(e);\r\n      }\r\n\r\n\r\n      if (this.currentTool === 'pencil') {\r\n        this.drawWithPencil(e, false);\r\n      }\r\n\r\n      if (this.currentTool === 'eraser') {\r\n        this.drawWithPencil(e, true);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  drawWithPencil(event, eraser) {\r\n    let draw = true;\r\n    let prevCoord;\r\n    // when mousedown -> draw one pixel OR erser\r\n    if (eraser) {\r\n      prevCoord = this.clearOnePixel(event, this.canvas);\r\n    } else {\r\n      prevCoord = this.drawPixel(event, this.canvas);\r\n    }\r\n    this.canvas.addEventListener('mousemove', (e) => {\r\n      if (draw === true) {\r\n        const currCoord = Canvas.getCoord(e, this.canvas, this.scale);\r\n        // when mousemove -> draw a lot of pixels\r\n        // during  mousemove occurs spaces, so  drawLineByBresenham and reassign prevCoord\r\n        this.drawLineByBresenham(prevCoord.x, prevCoord.y,\r\n          currCoord.x, currCoord.y, this.currСolor, eraser);\r\n        prevCoord = currCoord;\r\n      }\r\n    });\r\n\r\n    this.canvas.addEventListener('mouseup', () => {\r\n      draw = false;\r\n    });\r\n  }\r\n\r\n  drawPixel(e) {\r\n    const currCoord = Canvas.getCoord(e, this.canvas, this.scale);\r\n    this._context.fillStyle = this.currСolor;\r\n    this._context.fillRect(currCoord.x, currCoord.y, this.penSize, this.penSize);\r\n\r\n    return currCoord;\r\n  }\r\n\r\n  clearOnePixel(e) {\r\n    const currCoord = Canvas.getCoord(e, this.canvas, this.scale);\r\n    this._context.clearRect(currCoord.x, currCoord.y, this.penSize, this.penSize);\r\n    return currCoord;\r\n  }\r\n\r\n\r\n  fillClosedArea(event) {\r\n    const currCoord = Canvas.getCoord(event, this.canvas, this.scale);\r\n    const firstColor = getColorFromCanvas(this.canvas, currCoord, this.dimension);\r\n\r\n    this._context.fillStyle = this.currСolor;\r\n\r\n    const pixelsToCheck = [currCoord.x, currCoord.y];\r\n\r\n    while (pixelsToCheck.length > 0) {\r\n      const y = pixelsToCheck.pop();\r\n      const x = pixelsToCheck.pop();\r\n\r\n      const coord = {\r\n        x,\r\n        y,\r\n      };\r\n\r\n      const pixelColor = getColorFromCanvas(this.canvas, coord, this.dimension);\r\n\r\n      if (x >= 0 && x < this.dimension && y >= 0 && y < this.dimension && (pixelColor === firstColor)) {\r\n        this._context.fillRect(x, y, this.penSize, this.penSize);\r\n        pixelsToCheck.push(x + this.penSize, y);\r\n        pixelsToCheck.push(x - this.penSize, y);\r\n        pixelsToCheck.push(x, y + this.penSize);\r\n        pixelsToCheck.push(x, y - this.penSize);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawResizedImage(src) {\r\n    this.canvas.width = this.dimension;\r\n    this.canvas.height = this.dimension;\r\n    this.setScale();\r\n\r\n    const img = new Image();\r\n\r\n    img.src = src;\r\n    img.onload = () => {\r\n      this._context.drawImage(img, 0, 0, this.dimension, this.dimension);\r\n    };\r\n  }\r\n\r\n\r\n  static getCoord(event, canvas, scale) {\r\n    const coord1 = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    coord1.x = (event.pageX - canvas.offsetLeft);\r\n    coord1.y = (event.pageY - canvas.offsetTop);\r\n    coord1.x = Math.floor(coord1.x / scale);\r\n    coord1.y = Math.floor(coord1.y / scale);\r\n\r\n    return coord1;\r\n  }\r\n\r\n  drawLineByBresenham(x0, y0, currX, currY, Сolor, eraser) {\r\n    const dx = Math.abs(currX - x0);\r\n    const dy = Math.abs(currY - y0);\r\n    const sx = (x0 < currX) ? 1 : -1;\r\n    const sy = (y0 < currY) ? 1 : -1;\r\n    let err = dx - dy;\r\n\r\n    let prevX = x0; // reassign in loop\r\n    let prevY = y0;\r\n\r\n\r\n    while ((prevX !== currX) || (prevY !== currY)) {\r\n      if (!eraser) {\r\n        this.context.fillStyle = Сolor;\r\n        this.context.fillRect(prevX, prevY, this.penSize, this.penSize);\r\n      } else {\r\n        this._context.clearRect(prevX, prevY, this.penSize, this.penSize);\r\n      }\r\n      const e2 = 2 * err;\r\n\r\n      if (e2 > -dy) {\r\n        err -= dy;\r\n        prevX += sx;\r\n      }\r\n\r\n      if (e2 < dx) {\r\n        err += dx;\r\n        prevY += sy;\r\n      }\r\n    }\r\n  }\r\n\r\n  // CONSTANTS\r\n  static get canvasWidth() {\r\n    return canvasWidth;\r\n  }\r\n}\r\n","/* eslint-disable no-restricted-globals */\r\n/* eslint-disable func-names */\r\nimport './_frames.scss';\r\nimport {\r\n  addFrameButtonEl,\r\n} from '../constants';\r\n\r\nfunction renderFrame(controlCanvas, controlState) {\r\n  const frameBlock = document.createElement('div');\r\n  frameBlock.className = 'frames__block';\r\n\r\n  const frameCanvas = document.createElement('canvas');\r\n  frameCanvas.className = 'frames__canvas';\r\n\r\n  const deleteBtn = document.createElement('button');\r\n  deleteBtn.className = 'tile-overlay delete-frame icon-frame-recyclebin';\r\n  deleteBtn.addEventListener('click', () => deleteFrame());\r\n\r\n  const copyBtn = document.createElement('button');\r\n  copyBtn.className = 'tile-overlay duplicate-frame icon-frame-duplicate';\r\n  copyBtn.addEventListener('click', () => copyFrame(frameCanvas, controlCanvas, controlState));\r\n\r\n\r\n  frameBlock.addEventListener('mouseover', () => {\r\n    frameBlock.classList.add('hover');\r\n    copyBtn.classList.add('visible');\r\n    deleteBtn.classList.add('visible');\r\n  });\r\n  frameBlock.addEventListener('mouseout', () => {\r\n    frameBlock.classList.remove('hover');\r\n    copyBtn.classList.remove('visible');\r\n    deleteBtn.classList.remove('visible');\r\n  });\r\n\r\n  frameBlock.appendChild(frameCanvas);\r\n  frameBlock.appendChild(deleteBtn);\r\n  frameBlock.appendChild(copyBtn);\r\n\r\n  return frameBlock;\r\n}\r\n\r\n\r\nfunction copyFrame(oldFrame, controlCanvas, controlState) {\r\n  addFrame(controlCanvas, controlState);\r\n  printImageToNewFrame(oldFrame);\r\n  setTimeout(() => printImageOnCanvas(controlCanvas, controlState), 0);\r\n}\r\n\r\nfunction deleteFrame() {\r\n  const frameBlock = document.querySelector('.frames__block.hover');\r\n  frameBlock.remove();\r\n}\r\n\r\nfunction addFrame(controlCanvas, controlState) {\r\n  const frame = renderFrame(controlCanvas, controlState);\r\n  addFrameButtonEl.before(frame);\r\n  let framesEl = document.querySelectorAll('.frames__canvas');\r\n  framesEl = Array.prototype.slice.call(framesEl);\r\n  framesEl.map((elem) => {\r\n    elem.classList.remove('active');\r\n  });\r\n\r\n  // REPLACE FRAMES\r\n  frame.addEventListener('mousedown', (e) => {\r\n    document.body.style.cursor = 'move';\r\n\r\n    moveFigure(frame, e);\r\n  });\r\n\r\n\r\n  frame.childNodes[0].classList.add('active');\r\n\r\n  frame.childNodes[0].addEventListener('click', () => {\r\n    framesEl = document.querySelectorAll('.frames__canvas');\r\n    framesEl = Array.prototype.slice.call(framesEl);\r\n    framesEl.map((elem) => {\r\n      elem.classList.remove('active');\r\n    });\r\n    frame.childNodes[0].classList.toggle('active');\r\n    printImageOnCanvas(controlCanvas, controlState);\r\n  });\r\n  const context = controlCanvas.canvas.getContext('2d');\r\n  context.clearRect(0, 0, controlCanvas.canvas.width, controlCanvas.canvas.height);\r\n}\r\n\r\nfunction printImageOnCanvas(controlCanvas, controlState) {\r\n  const frame = document.querySelector('.frames__canvas.active');\r\n  const img = new Image();\r\n  img.src = frame.toDataURL();\r\n  const context = controlCanvas.canvas.getContext('2d');\r\n  context.clearRect(0, 0, controlCanvas.canvas.width, controlCanvas.canvas.height);\r\n\r\n  img.onload = () => {\r\n    context.drawImage(img, 0, 0,\r\n      controlState.state.dimension,\r\n      controlState.state.dimension);\r\n  };\r\n}\r\n\r\nfunction printImageOnFrame(controlCanvas) {\r\n  const img = new Image();\r\n  img.src = controlCanvas.canvas.toDataURL();\r\n  const frame = document.querySelector('.frames__canvas.active');\r\n  const context = frame.getContext('2d');\r\n  frame.width = controlCanvas.dimension;\r\n  frame.height = controlCanvas.dimension;\r\n  img.onload = () => {\r\n    context.drawImage(img, 0, 0,\r\n      controlCanvas.dimension,\r\n      controlCanvas.dimension);\r\n  };\r\n}\r\n\r\nfunction printImageToNewFrame(oldFrame) {\r\n  const img = new Image();\r\n  img.src = oldFrame.toDataURL();\r\n  const frame = document.querySelector('.frames__canvas.active');\r\n  const context = frame.getContext('2d');\r\n  frame.width = oldFrame.width;\r\n  frame.height = oldFrame.height;\r\n  img.onload = () => {\r\n    context.drawImage(img, 0, 0,\r\n      oldFrame.width,\r\n      oldFrame.height);\r\n  };\r\n}\r\n\r\nfunction moveFigure(figure, event) {\r\n  const fames = document.querySelector('.frames');\r\n  const coords = getCoords(figure);\r\n  const famesCoords = getCoords(fames);\r\n  // const shiftX = event.pageX - coords.left;\r\n  const shiftY = event.pageY - coords.top;\r\n  const framesShiftY = event.pageY - famesCoords.top;\r\n\r\n  figure.style.position = 'absolute';\r\n  figure.style.zIndex = 1000;\r\n  // figure.style.left = '117px';\r\n  // figure.style.top = '150px';\r\n\r\n  // document.body.appendChild(figure);\r\n  fames.appendChild(figure);\r\n\r\n  moveAt(event);\r\n\r\n  /* eslint-disable no-shadow */\r\n  document.onmousemove = function (event) {\r\n    moveAt(event);\r\n  };\r\n\r\n  figure.onmouseup = function () {\r\n    // figure.style.position = 'relative';\r\n    // figure.style.top = framesShiftY + shiftY;\r\n\r\n    document.onmousemove = null;\r\n    figure.onmouseup = null;\r\n  };\r\n\r\n  // browser has its own Drag’n’Drop - switch it off\r\n  figure.ondragstart = function () {\r\n    return false;\r\n  };\r\n\r\n  function moveAt(e) {\r\n    figure.style.top = `${e.pageY - framesShiftY - shiftY}px`;\r\n  }\r\n\r\n  function getCoords(elem) {\r\n    const box = elem.getBoundingClientRect();\r\n    return {\r\n      top: box.top + pageYOffset,\r\n      left: box.left + pageXOffset,\r\n    };\r\n  }\r\n}\r\n\r\nexport {\r\n  printImageOnFrame,\r\n  addFrame,\r\n};\r\n","import './_preview.scss';\r\nimport {\r\n  previewEl,\r\n} from '../constants';\r\n\r\nlet then;\r\nlet fpsInterval;\r\nlet dimention;\r\n\r\nfunction getDimension(canvasDimension) {\r\n  return canvasDimension;\r\n}\r\n\r\nexport default function animation(fps, canvasDimension) {\r\n  fpsInterval = 1000 / fps;\r\n  then = Date.now();\r\n  // get canvas dimension from app module\r\n  dimention = getDimension(canvasDimension);\r\n\r\n  draw();\r\n}\r\n\r\nfunction draw() {\r\n  // request another frame\r\n  requestAnimationFrame(draw);\r\n\r\n  // calc elapsed time since last loop\r\n  const now = Date.now();\r\n  const elapsed = now - then;\r\n\r\n  // if enough time has elapsed, draw the next frame\r\n  if (elapsed > fpsInterval) {\r\n    // Get ready for next frame by setting then=now, but...\r\n    // Also, adjust for fpsInterval not being multiple of 16.67\r\n    then = now - (elapsed % fpsInterval);\r\n    drawFrame();\r\n  }\r\n}\r\n\r\nlet frameNumber = 0;\r\nlet lastFrameFlag = true;\r\nconst imgFromFrame = new Image();\r\n\r\nfunction drawFrame() {\r\n  const ctx = previewEl.getContext('2d');\r\n  let count = 1;\r\n\r\n  count = getImgFromFrame(frameNumber);\r\n  ctx.clearRect(0, 0, dimention, dimention);\r\n\r\n  previewEl.width = dimention;\r\n  previewEl.height = dimention;\r\n\r\n  ctx.drawImage(imgFromFrame, 0, 0, dimention, dimention);\r\n\r\n  if (frameNumber >= count) lastFrameFlag = false;\r\n  if (frameNumber <= 0) lastFrameFlag = true;\r\n\r\n  if (lastFrameFlag) frameNumber += 1;\r\n  else frameNumber = 0;\r\n}\r\n\r\nfunction getImgFromFrame(i) {\r\n  let frame = document.querySelectorAll('.frames__canvas');\r\n  frame = Array.prototype.slice.call(frame);\r\n  imgFromFrame.src = frame[i].toDataURL();\r\n  return frame.length - 1;\r\n}\r\n","export default function setAction(tool, cursor, toolEl, controlCanvas_) {\r\n  clearToolState();\r\n  controlCanvas_.currentTool = tool;\r\n  document.body.style.cursor = cursor; // change cursor type\r\n  toolEl.classList.add('active');\r\n}\r\n\r\nfunction clearToolState() {\r\n  const palleteEl = document.querySelector('.pallete');\r\n  let childs = palleteEl.children;\r\n  childs = Array.prototype.slice.call(childs);\r\n  childs.map((elem) => {\r\n    elem.classList.remove('active');\r\n  });\r\n}\r\n","import './_panel.scss';\r\nimport './_tools.scss';\r\nimport './_tooltips.scss';\r\n\r\nimport {\r\n  BUCKET_CURSOR,\r\n  COLOR_PICKER_CURSOR,\r\n  PENCIL_CURSOR,\r\n  ERASER_CURSOR,\r\n  paintBucketEl,\r\n  colorPickerEl,\r\n  pencilEl,\r\n  eraserEl,\r\n  canvasSize,\r\n  penSize,\r\n} from '../constants';\r\n\r\nimport setAction from '../../helpers/setAction';\r\n\r\nconst COLOR_PICKER = 'colorPicker';\r\nconst ERASER = 'eraser';\r\nconst PENCIL = 'pencil';\r\nconst PAINTBUCKET = 'paintBucket';\r\n\r\nfunction handlerPenSize(controlCanvas) {\r\n  penSize.map((elem) => {\r\n    elem.addEventListener('click', () => {\r\n      penSize.map(el => el.classList.remove('selected'));\r\n      elem.classList.add('selected');\r\n\r\n      controlCanvas.penSize = +elem.dataset.size;\r\n    });\r\n  });\r\n}\r\n\r\nfunction handlerCanvasSize(controlCanvas, controlState) {\r\n  canvasSize.map((elem) => {\r\n    elem.addEventListener('click', () => {\r\n      canvasSize.map(el => el.classList.remove('active'));\r\n      elem.classList.add('active');\r\n\r\n      controlCanvas.dimension = +elem.innerHTML;\r\n      controlCanvas.drawResizedImage(controlState.state.img);\r\n      controlState.saveDimension(controlCanvas.dimension);\r\n    });\r\n  });\r\n}\r\n\r\nfunction initTool(controlCanvas, currentTool) {\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    switch (currentTool) {\r\n      case PENCIL:\r\n        setAction(PENCIL, PENCIL_CURSOR, pencilEl, controlCanvas);\r\n        break;\r\n      case ERASER:\r\n        setAction(ERASER, ERASER_CURSOR, eraserEl, controlCanvas);\r\n        break;\r\n      case PAINTBUCKET:\r\n        setAction(PAINTBUCKET, BUCKET_CURSOR, paintBucketEl, controlCanvas);\r\n        break;\r\n      case COLOR_PICKER:\r\n        setAction(COLOR_PICKER, COLOR_PICKER_CURSOR, colorPickerEl, controlCanvas);\r\n        currentTool = COLOR_PICKER;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n}\r\n\r\nfunction handlerPaleteTools(controlCanvas, controlState) {\r\n  paintBucketEl.addEventListener('click', () => {\r\n    setAction(PAINTBUCKET, BUCKET_CURSOR, paintBucketEl, controlCanvas);\r\n    controlState.saveTool(PAINTBUCKET);\r\n  });\r\n\r\n  colorPickerEl.addEventListener('click', () => {\r\n    setAction(COLOR_PICKER, COLOR_PICKER_CURSOR, colorPickerEl, controlCanvas);\r\n    controlState.state.tool = COLOR_PICKER;\r\n    controlState.saveTool(COLOR_PICKER);\r\n  });\r\n\r\n  pencilEl.addEventListener('click', () => {\r\n    setAction(PENCIL, PENCIL_CURSOR, pencilEl, controlCanvas);\r\n    controlState.saveTool(PENCIL);\r\n  });\r\n\r\n  eraserEl.addEventListener('click', () => {\r\n    setAction(ERASER, ERASER_CURSOR, eraserEl, controlCanvas);\r\n    controlState.saveTool(ERASER);\r\n  });\r\n}\r\n\r\nexport {\r\n  initTool,\r\n  handlerPaleteTools,\r\n  handlerPenSize,\r\n  handlerCanvasSize,\r\n};\r\n","import setAction from '../../helpers/setAction';\r\nimport {\r\n  BUCKET_CURSOR,\r\n  COLOR_PICKER_CURSOR,\r\n  PENCIL_CURSOR,\r\n  ERASER_CURSOR,\r\n  paintBucketEl,\r\n  colorPickerEl,\r\n  pencilEl,\r\n  eraserEl,\r\n} from '../constants';\r\n\r\nconst KEY_CODE_S = 83;\r\nconst KEY_CODE_B = 66;\r\nconst KEY_CODE_C = 67;\r\nconst KEY_CODE_P = 80;\r\nconst KEY_CODE_E = 69;\r\nconst KEY_CODE_ESC = 27;\r\n\r\n\r\nexport default function handlerHotKey(e, controlCanvas, controlState) {\r\n  if (e.keyCode === KEY_CODE_S && e.altKey) {\r\n    controlState.saveStateApp();\r\n  }\r\n  if (e.keyCode === KEY_CODE_B) {\r\n    setAction('paintBucket', BUCKET_CURSOR, paintBucketEl, controlCanvas);\r\n  }\r\n  if (e.keyCode === KEY_CODE_C) {\r\n    setAction('colorPicker', COLOR_PICKER_CURSOR, colorPickerEl, controlCanvas);\r\n  }\r\n  if (e.keyCode === KEY_CODE_P) {\r\n    setAction('pencil', PENCIL_CURSOR, pencilEl, controlCanvas);\r\n  }\r\n  if (e.keyCode === KEY_CODE_E) {\r\n    setAction('eraser', ERASER_CURSOR, eraserEl, controlCanvas);\r\n  }\r\n  if (e.keyCode === KEY_CODE_ESC) {\r\n    document.body.style.cursor = '';\r\n  }\r\n}\r\n","/* eslint-disable no-undef */\r\nimport './_save-btn.scss';\r\n\r\nconst canvasApng = document.querySelector('.apng-canvas');\r\n\r\nfunction downloadGif(delay) {\r\n  const encoder = new GIFEncoder();\r\n  encoder.setRepeat(0);\r\n\r\n  encoder.setDelay(delay);\r\n  encoder.start();\r\n\r\n  let frames = document.querySelectorAll('.frames__canvas');\r\n  frames = Array.prototype.slice.call(frames);\r\n  frames.forEach(frame => encoder.addFrame(frame.getContext('2d')));\r\n  encoder.finish();\r\n  encoder.download('download.gif');\r\n}\r\n\r\nfunction downloadAPNG(delay, iLink, dimension) {\r\n  window.encoder = new APNGencoder(canvasApng);\r\n  encoder.setRepeat(0);\r\n  encoder.setDelay(delay);\r\n  encoder.setDispose(0);\r\n  encoder.setBlend(1);\r\n\r\n  encoder.start();\r\n  addFrames(dimension);\r\n  encoder.finish();\r\n\r\n  const out = encoder.stream();\r\n  const href = URL.createObjectURL(new Blob([new Uint8Array(out.bin)], {\r\n    type: 'image/png',\r\n  }));\r\n  iLink.href = href;\r\n  iLink.download = 'animation.png';\r\n  return 0;\r\n}\r\n\r\nfunction addFrames(dimension) {\r\n  const ctx = canvasApng.getContext('2d');\r\n  let frames = document.querySelectorAll('.frames__canvas');\r\n  frames = Array.prototype.slice.call(frames);\r\n  frames.forEach((frame) => {\r\n    canvasApng.width = dimension;\r\n    canvasApng.height = dimension;\r\n    const img = new Image();\r\n    img.src = frame.toDataURL();\r\n    ctx.drawImage(img, 0, 0, dimension, dimension);\r\n\r\n    encoder.addFrame(ctx);\r\n  });\r\n\r\n  encoder.addFrame(ctx);\r\n\r\n  return 0;\r\n}\r\n\r\nexport {\r\n  downloadGif,\r\n  downloadAPNG,\r\n};\r\n","import {\r\n  rngFps,\r\n  dspFps,\r\n} from '../components/constants';\r\n\r\nexport default function getFps() {\r\n  dspFps.innerHTML = `${rngFps.value} FPS`;\r\n  return +rngFps.value;\r\n}\r\n","import './views';\r\n\r\nimport {\r\n  loadColors,\r\n} from './components/color/color';\r\n\r\nimport State from './models/State';\r\nimport Canvas from './models/Canvas';\r\n\r\nimport initEventListeners from './controllers/controller';\r\n\r\nimport loadCanvasSize from './helpers/loadState';\r\n\r\nimport {\r\n  canvasEl,\r\n} from './components/constants';\r\n\r\nconst controlState = new State(canvasEl);\r\nloadColors(controlState);\r\nloadCanvasSize(controlState.state.dimension);\r\n\r\nconst controlCanvas = new Canvas(canvasEl, controlState.state.currСolor);\r\ncontrolCanvas.dimension = controlState.state.dimension;\r\ncontrolCanvas.setScale();\r\ncontrolCanvas.addListeners();\r\n\r\ninitEventListeners(controlCanvas, controlState);\r\n","export default class State {\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n    this.state = this.initialState();\r\n    this.loadState();\r\n  }\r\n\r\n  saveStateApp(colors) {\r\n    // save state of colors\r\n    [this.state.currСolor, this.state.prevСolor] = colors;\r\n\r\n    this.state.img = this.canvas.toDataURL();\r\n\r\n    localStorage.setItem('state', JSON.stringify(this.state));\r\n  }\r\n\r\n  // just change dinemtion - eg: 512 -> 128\r\n  saveDimension(dimension) {\r\n    this.state.dimension = dimension;\r\n    localStorage.setItem('state', JSON.stringify(this.state));\r\n    return true;\r\n  }\r\n\r\n  saveCanvas(dimension) {\r\n    this.state.dimension = dimension;\r\n    this.state.img = this.canvas.toDataURL();\r\n    localStorage.setItem('state', JSON.stringify(this.state));\r\n    return true;\r\n  }\r\n\r\n  saveTool(tool) {\r\n    this.state.tool = tool;\r\n    localStorage.setItem('state', JSON.stringify(this.state));\r\n    return true;\r\n  }\r\n\r\n\r\n  loadState() {\r\n    this.state = JSON.parse(localStorage.getItem('state'));\r\n    if (this.state) {\r\n      this.applySavedState();\r\n    } else {\r\n      this.initialState();\r\n    }\r\n  }\r\n\r\n  initialState() {\r\n    this.state = {\r\n      currСolor: 'green',\r\n      prevСolor: '',\r\n    };\r\n    this.state.img = '';\r\n    this.state.dimension = 512;\r\n    this.state.tool = 'pencil';\r\n    return this.state;\r\n  }\r\n\r\n  applySavedState() {\r\n    const img = new Image();\r\n    img.src = this.state.img;\r\n    const context = this.canvas.getContext('2d');\r\n    this.canvas.width = this.state.dimension;\r\n    this.canvas.height = this.state.dimension;\r\n    img.onload = () => {\r\n      context.drawImage(img, 0, 0,\r\n        this.state.dimension,\r\n        this.state.dimension);\r\n    };\r\n  }\r\n}\r\n","import './_colors.scss';\r\n\r\nimport {\r\n  currColorEl,\r\n  prevColorEl,\r\n  canvasEl,\r\n} from '../constants';\r\n\r\nimport Canvas from '../../models/Canvas';\r\nimport getColorFromCanvas from '../../helpers/getColor';\r\n\r\nexport default function handlerColor(controlCanvas, controlState) {\r\n  currColorEl.addEventListener('input', (e) => {\r\n    controlState.state.currСolor = e.target.value;\r\n    controlCanvas.currСolor = controlState.state.currСolor;\r\n    refreshColor(e.target.value);\r\n  }, false);\r\n\r\n  prevColorEl.addEventListener('input', (e) => {\r\n    controlState.state.currСolor = e.target.value;\r\n    controlCanvas.currСolor = controlState.state.currСolor;\r\n    refreshColor(e.target.value);\r\n  }, false);\r\n\r\n  canvasEl.addEventListener('mousedown', (e) => {\r\n    if (controlState.state.tool === 'colorPicker') {\r\n      const coord = Canvas.getCoord(e, controlCanvas.canvas, controlCanvas.scale);\r\n      refreshColor(getColorFromCanvas(controlCanvas.canvas,\r\n        coord, controlCanvas.dimension));\r\n    }\r\n  });\r\n\r\n  function refreshColor(crColor) {\r\n    const prColor = currColorEl.value;\r\n    // change color if it is not same with current color\r\n    if (crColor !== controlState.state.currСolor) {\r\n      controlState.state.prevСolor = prColor;\r\n      controlState.state.currСolor = crColor;\r\n      currColorEl.value = controlState.state.currСolor;\r\n      prevColorEl.value = controlState.state.prevСolor;\r\n      controlCanvas.currСolor = crColor;\r\n    }\r\n  }\r\n}\r\n\r\nfunction loadColors(controlState) {\r\n  currColorEl.value = controlState.state.currСolor;\r\n  prevColorEl.value = controlState.state.prevСolor;\r\n}\r\n\r\nexport {\r\n  handlerColor,\r\n  loadColors,\r\n};\r\n","import {\r\n  canvasSize,\r\n} from '../components/constants';\r\n\r\nexport default function loadStateCanvasSize(dimension) {\r\n  if (dimension === 32) {\r\n    canvasSize.map(el => el.classList.remove('active'));\r\n    canvasSize[0].classList.add('active');\r\n  }\r\n\r\n  if (dimension === 64) {\r\n    canvasSize.map(el => el.classList.remove('active'));\r\n    canvasSize[1].classList.add('active');\r\n  }\r\n\r\n  if (dimension === 128) {\r\n    canvasSize.map(el => el.classList.remove('active'));\r\n    canvasSize[2].classList.add('active');\r\n  }\r\n}\r\n","import {\r\n  printImageOnFrame,\r\n  addFrame,\r\n} from '../components/frames/frames';\r\n\r\nimport '../components/preview/_preview.scss';\r\nimport animation from '../components/preview/preview';\r\n\r\nimport {\r\n  initTool,\r\n  handlerPaleteTools,\r\n  handlerPenSize,\r\n  handlerCanvasSize,\r\n} from '../components/tool/tools';\r\n\r\nimport {\r\n  handlerColor,\r\n} from '../components/color/color';\r\n\r\nimport handlerHotKey from '../components/hotkey/hotkey';\r\n\r\nimport {\r\n  downloadGif,\r\n  downloadAPNG,\r\n} from '../components/saveImg/saveImg';\r\n\r\nimport getFps from '../helpers/getFps';\r\n\r\nimport {\r\n  canvasEl,\r\n  addFrameButtonEl,\r\n  // firstFrames,\r\n  saveImgToGif,\r\n  saveImgToApng,\r\n  rngFps,\r\n} from '../components/constants';\r\n\r\n\r\nexport default function initEventListeners(controlCanvas, controlState) {\r\n  // FRAMES\r\n  addFrame(controlCanvas, controlState); // first frame\r\n  addFrameButtonEl.addEventListener('click', () => addFrame(controlCanvas, controlState));\r\n\r\n  // PFS\r\n  rngFps.addEventListener('click', () => animation(getFps(), controlState.state.dimension));\r\n\r\n  // CANVAS\r\n  canvasEl.addEventListener('mouseup', () => {\r\n    printImageOnFrame(controlCanvas);\r\n    controlState.saveStateApp([controlState.state.currСolor, controlState.state.prevСolor]);\r\n  });\r\n\r\n  // HOTKEY\r\n  document.addEventListener('keydown', e => handlerHotKey(e, controlCanvas, controlState));\r\n\r\n  // SAVE\r\n  saveImgToGif.addEventListener('click', () => downloadGif(1000 / getFps()));\r\n  saveImgToApng.addEventListener('click', () => downloadAPNG(1000 / getFps(), saveImgToApng, controlState.state.dimension));\r\n\r\n  // TOOLS\r\n  handlerCanvasSize(controlCanvas, controlState);\r\n  handlerPenSize(controlCanvas);\r\n  initTool(controlCanvas, controlState.state.tool);\r\n  handlerPaleteTools(controlCanvas, controlState);\r\n\r\n  // COLORS\r\n  handlerColor(controlCanvas, controlState);\r\n}\r\n"],"sourceRoot":""}